local P = game.Players.LocalPlayer
local Plrs = game:GetService("Players")
local RS = game:GetService("RunService")

local C = P.Character or P.CharacterAdded:Wait()
P.CharacterAdded:Connect(function(char) C = char end)

-- GUI mínimo
local G = Instance.new("ScreenGui", P:WaitForChild("PlayerGui"))
G.Name = "CamFollowGui"
local W = Instance.new("Frame", G)
W.Size = UDim2.new(0,300,0,50)
W.Position = UDim2.new(0.5,-150,0,10)
W.BackgroundColor3 = Color3.fromRGB(20,20,20)
W.BorderSizePixel = 0
W.Active = true

local T = Instance.new("TextLabel", W)
T.Size = UDim2.new(1,0,1,0)
T.Text = "Cámara: Seguimiento activado"
T.TextColor3 = Color3.fromRGB(255,255,255)
T.BackgroundTransparency = 1
T.TextScaled = true

-- Función para calcular jugador más cercano
local function getClosestPlayer()
	local closest = nil
	local minDist = math.huge
	if not C or not C:FindFirstChild("HumanoidRootPart") then return nil end
	local myPos = C.HumanoidRootPart.Position
	for _, plr in pairs(Plrs:GetPlayers()) do
		if plr ~= P and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			local dist = (plr.Character.HumanoidRootPart.Position - myPos).Magnitude
			if dist < minDist then
				minDist = dist
				closest = plr
			end
		end
	end
	return closest
end

-- Actualizar cámara cada frame
RS.RenderStepped:Connect(function()
	local target = getClosestPlayer()
	if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
		game.Workspace.CurrentCamera.CameraType = Enum.CameraType.Scriptable
		game.Workspace.CurrentCamera.CFrame = CFrame.new(game.Workspace.CurrentCamera.CFrame.Position, target.Character.HumanoidRootPart.Position)
	end
end)
